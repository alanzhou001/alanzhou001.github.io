{{/* è¿™ä¸ªæ¨¡æ¿ä¼šè¦†ç›– Hugo é»˜è®¤çš„å›¾ç‰‡æ¸²æŸ“è¡Œä¸ºã€‚
    å®ƒä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«å›¾ç‰‡åŠå…¶è¯¦ç»† EXIF å…ƒæ•°æ®ä¿¡æ¯çš„å¡ç‰‡ã€‚
*/}}
{{- $image := .Page.Resources.GetMatch .Destination -}}

{{- if $image -}}
  {{/* å°†å›¾ç‰‡è°ƒæ•´ä¸ºé€‚åˆåœ¨é¡µé¢ä¸Šç›´æ¥å±•ç¤ºçš„å°ºå¯¸ */}}
  {{- $resizedImage := $image.Resize "800x" -}}
  {{- $exif := $image.Exif -}}

  <figure class="gallery-figure">
    {{/* å›¾ç‰‡æœ¬èº« */}}
    <img src="{{ $resizedImage.RelPermalink }}" alt="{{ .Text }}" width="{{ $resizedImage.Width }}" height="{{ $resizedImage.Height }}" loading="lazy">
    
    {{/* å›¾ç‰‡ä¸‹æ–¹çš„å…ƒæ•°æ®åŒºåŸŸ */}}
    <figcaption class="gallery-figcaption">
      {{- with .Text }}
        <div class="caption-title"><strong>{{ . }}</strong></div>
      {{ end -}}
      
      <div class="exif-details">
        {{- with $exif -}}
          {{- with .Date }}<div class="exif-item">ğŸ—“ï¸<span>{{ .Format "2006-01-02 15:04" }}</span></div>{{ end -}}
          
          {{/* --- æ–°å¢ï¼šè®¾å¤‡å’Œé•œå¤´ä¿¡æ¯ --- */}}
          {{- with .Tags.Model }}<div class="exif-item">ğŸ“·<span>{{ . }}</span></div>{{ end -}}
          {{- with .Tags.LensModel }}<div class="exif-item">ë Œì¦ˆ<span>{{ . }}</span></div>{{ end -}}
          
          {{/* --- æ–°å¢ï¼šå…‰åœˆå’Œç„¦è· --- */}}
          {{- with .Tags.FNumber -}}
            {{- $fnumber := lang.FormatNumber 1 . -}}
            <div class="exif-item">âš™ï¸<span>Æ’/{{ $fnumber }}</span></div>
          {{- end -}}
          {{- with .Tags.FocalLength -}}
            {{- $focal := lang.FormatNumber 0 . -}}
            <div class="exif-item">ğŸ”­<span>{{ $focal }}mm</span></div>
          {{- end -}}

          {{/* --- æ–°å¢ï¼šå¯ç‚¹å‡»çš„åœ°å›¾é“¾æ¥ --- */}}
          {{- with and .Lat .Long -}}
            <div class="exif-item">ğŸ“<span><a href="https://www.google.com/maps?q={{ .Lat }},{{ .Long }}" target="_blank" rel="noopener noreferrer">åœ¨åœ°å›¾ä¸ŠæŸ¥çœ‹</a></span></div>
          {{- end -}}
        {{- end -}}
      </div>
    </figcaption>
  </figure>
{{- else -}}
  {{/* å¦‚æœæ‰¾ä¸åˆ°å›¾ç‰‡èµ„æº (ä¾‹å¦‚å¤–éƒ¨é“¾æ¥)ï¼Œåˆ™æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ */}}
  <img src="{{ .Destination | safeURL }}" alt="{{ .Text }}">
{{- end -}}
